# Cursor Rules f√ºr Block Editor

## Notification Message System

### Verwendung der Notification-Funktion

**WICHTIG:** Verwende IMMER die `showNotification()` Funktion f√ºr alle Benutzer-Feedback-Nachrichten. Verwende KEINE `alert()`, `confirm()` oder andere Browser-Dialoge f√ºr Erfolgs-/Fehler-Meldungen.

### Funktion: `showNotification(message, type, duration)`

**Parameter:**
- `message` (string, erforderlich): Die Nachricht, die angezeigt werden soll. Kann auch HTML enthalten.
- `type` (string, optional, Standard: 'success'): Der Typ der Notification
  - `'success'` - Erfolgsmeldung (gr√ºn)
  - `'error'` - Fehlermeldung (rot)
  - `'info'` - Informationsmeldung (blau)
  - `'warning'` - Warnmeldung (gelb)
- `duration` (number, optional, Standard: 3000): Dauer in Millisekunden bis zum automatischen Ausblenden. Setze `0` f√ºr kein automatisches Ausblenden.

### Verwendungsbeispiele:

```javascript
// Erfolgreiche Aktion (Standard)
this.showNotification('Erfolgreich gespeichert!', 'success');

// Fehler mit l√§ngerer Anzeigedauer
this.showNotification('Fehler beim Speichern', 'error', 5000);

// Warnung
this.showNotification('Bitte beachten Sie die Einstellungen', 'warning');

// Info
this.showNotification('Neue Version verf√ºgbar', 'info');

// HTML-Inhalt ohne automatisches Ausblenden
this.showNotification('<strong>Wichtig:</strong> Bitte pr√ºfen Sie die Einstellungen', 'warning', 0);
```

### Wann welche Funktion verwenden:

- **Speichern-Operationen:** `this.showNotification('Erfolgreich gespeichert!', 'success');`
- **L√∂schen-Operationen:** `this.showNotification('Erfolgreich gel√∂scht!', 'success');`
- **Bearbeiten-Operationen:** `this.showNotification('Erfolgreich bearbeitet!', 'success');`
- **Fehler:** `this.showNotification('Fehler beim Speichern', 'error');`
- **Warnungen:** `this.showNotification('Bitte beachten Sie...', 'warning');`
- **Informationen:** `this.showNotification('Hinweis: ...', 'info');`

### Wichtige Regeln:

1. **NIEMALS** `alert()` f√ºr Erfolgs-/Fehler-Meldungen verwenden
2. **IMMER** `showNotification()` f√ºr Benutzer-Feedback verwenden
3. Verwende den passenden Typ (`success`, `error`, `info`, `warning`)
4. F√ºr kritische Warnungen kann `duration: 0` verwendet werden (kein automatisches Ausblenden)
5. HTML-Inhalte werden unterst√ºtzt (z.B. f√ºr fettgedruckte Texte: `<strong>Text</strong>`)

### Technische Details:

- Die Notification wird automatisch nach der angegebenen Dauer ausgeblendet
- Benutzer k√∂nnen die Notification auch manuell schlie√üen (Klick auf X oder auf die Notification)
- Die Notification erscheint oben rechts im Viewport
- Unterst√ºtzt Alpine.js Transitions f√ºr sanfte Animationen

## Funktionen und Block-Verarbeitung

### Verbot von doppelten Funktionen

**WICHTIG:** Es d√ºrfen KEINE doppelten Funktionen existieren. Jede Funktion bearbeitet genau einen Block-Typ oder eine spezifische Funktionalit√§t.

### Regeln:

1. **Eine Funktion = Ein Block-Typ:** Jede Funktion ist f√ºr genau einen Block-Typ oder eine spezifische Aufgabe zust√§ndig
2. **Keine doppelte Verarbeitung:** Funktionen d√ºrfen nicht doppelt verarbeitet werden, auch nicht in `init()` oder anderen Initialisierungsfunktionen
3. **Keine doppelten Init-Funktionen:** Jeder Block-Typ hat genau eine Initialisierungsfunktion, keine doppelten `init()` Aufrufe f√ºr denselben Block
4. **Einheitliche Zust√§ndigkeit:** Wenn eine Funktion bereits einen Block bearbeitet, darf keine andere Funktion denselben Block ebenfalls bearbeiten

### Beispiele f√ºr VERBOTEN:

```javascript
// VERBOTEN: Doppelte Funktion f√ºr denselben Block
function initTextBlock() { /* ... */ }
function initializeTextBlock() { /* ... */ } // VERBOTEN - doppelte Initialisierung

// VERBOTEN: Doppelte Verarbeitung in init()
function init() {
    processBlock(block); // VERBOTEN wenn processBlock bereits in initBlock() aufgerufen wird
    initBlock(block);
}

// VERBOTEN: Mehrere Funktionen bearbeiten denselben Block
function handleTextBlock() { /* ... */ }
function processTextBlock() { /* ... */ } // VERBOTEN - doppelte Bearbeitung
```

### Beispiele f√ºr ERLAUBT:

```javascript
// ERLAUBT: Eine Funktion pro Block-Typ
function initTextBlock() { /* ... */ }
function initImageBlock() { /* ... */ }

// ERLAUBT: Klare Trennung der Zust√§ndigkeiten
function init() {
    initTextBlock();
    initImageBlock();
}

// ERLAUBT: Eine Funktion bearbeitet einen Block
function handleTextBlock(block) {
    // Einzige Funktion, die Text-Blocks bearbeitet
}
```

## Toolbar und Block-Typen

### Automatische Toolbar-Generierung

**WICHTIG:** Die Toolbar verwendet `x-for` mit `childBlockTypes`, um alle verf√ºgbaren Block-Typen dynamisch zu generieren. Block-Typen werden NICHT manuell in der HTML-Datei aufgelistet.

### Regeln:

1. **Automatische Generierung:** Die Toolbar iteriert √ºber `childBlockTypes` (das ist `BLOCK_TYPES` aus `block-types.js`) und generiert automatisch Buttons f√ºr alle verf√ºgbaren Block-Typen
2. **Keine manuellen Buttons:** Block-Typ-Buttons werden NICHT manuell in der HTML-Datei erstellt
3. **Zentrale Definition:** Alle Block-Typen werden zentral in `BLOCK_TYPES` definiert und erscheinen automatisch in der Toolbar
4. **Neue Block-Typen:** Wenn neue Block-Typen zu `BLOCK_TYPES` hinzugef√ºgt werden, erscheinen sie automatisch in der Toolbar ohne HTML-√Ñnderungen

### Implementierung:

```html
<!-- Block-Typen - Automatisch aus BLOCK_TYPES generiert -->
<div class="flex gap-2 flex-wrap mb-3">
    <template x-for="(config, blockType) in childBlockTypes" :key="blockType">
        <button 
            @click="addBlock(blockType)"
            class="px-3 py-1 bg-white rounded hover:bg-gray-200 text-sm"
        >
            <span x-text="config.label || blockType"></span>
        </button>
    </template>
</div>
```

### Vorteile:

- **Vollst√§ndigkeit:** Alle Block-Typen werden automatisch angezeigt, keine fehlenden Komponenten
- **Wartbarkeit:** Zentrale Definition in `BLOCK_TYPES`, keine doppelte Wartung
- **Automatische Updates:** Neue Block-Typen erscheinen automatisch in der Toolbar

### Beispiele f√ºr VERBOTEN:

```html
<!-- VERBOTEN: Manuelle Button-Erstellung f√ºr Block-Typen -->
<button @click="addBlock('paragraph')">üìù Paragraph</button>
<button @click="addBlock('heading1')">H1 √úberschrift</button>
<!-- ... weitere manuelle Buttons ... -->
```

### Beispiele f√ºr ERLAUBT:

```html
<!-- ERLAUBT: Automatische Generierung √ºber x-for -->
<template x-for="(config, blockType) in childBlockTypes" :key="blockType">
    <button @click="addBlock(blockType)">
        <span x-text="config.label || blockType"></span>
    </button>
</template>
```


